@using System.Web.Optimization
@using Fpm.MainUI

@{ Layout = "~/Views/Shared/_LayoutPage.cshtml"; }

@{
    ViewBag.Title = "User Feedback";
}
<link href="@(AppConfig.CssPath)TableSorter.css" rel="stylesheet" type="text/css"/>
@Scripts.Render("~/userfeedback.js")

<div class="standardWidth">
    <h2 class="subheading">User Feedback</h2>

    <table id="user-feedback" class="grid sortable">
        <colgroup>
            <col style="width: 5%">
            <col style="width: 3%">
            <col style="width: 24%">
            <col style="width: 24%">
            <col style="width: 19%">
            <col style="width: 3%">
            <col style="width: 5%">
        </colgroup>
        <thead>
        <tr>
            <th class="header">Time</th>
            <th class="header">Env</th>
            <th class="header">What user was doing</th>
            <th class="header">What went wrong</th>
            <th class="header">Email</th>
            <th class="header">Url</th>
            <th class="header">Action</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var feedback in Model)
        {
            <tr>
                <td class="left center">@feedback.Timestamp.ToString("yyyy/MM/dd")</td>
                <td class="left center">@feedback.Environment</td>
                <td class="left" style="word-wrap: break-word">@feedback.WhatUserWasDoing</td>
                <td class="left" style="word-wrap: break-word">@feedback.WhatWentWrong</td>
                <td class="left">@feedback.Email</td>
                <td class="left center" style="word-wrap: break-word;">
                    <a href="@feedback.Url" target="_brank">Link</a>
                </td>
                <td>
                    <button type="button" class="btn btn-default btn-sm" onclick="feedbackDetails(@feedback.Id)">Close</button>
                </td>
            </tr>
        }
        </tbody>
    </table>

    <div id="feedback-detail" class="container" style="display: none;">
        <h3>Close user feedback</h3>
        <div class="form-group row">
            <div class="col-md-2 control-label">Comment</div>
            <div class="col-md-2"><textarea id="feedback-comment" rows="4" cols="50"></textarea>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-10 col-md-offset-2">
                <button class="btn btn-primary" onclick="feedbackCommentAndArchive()">Close</button> <button class="btn btn-default" onclick="feedbackCancel()">Cancel</button>
            </div>
        </div>
    </div>
</div>