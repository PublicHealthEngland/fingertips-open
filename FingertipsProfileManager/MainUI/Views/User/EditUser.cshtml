@using System.Collections
@using Fpm.MainUI
@using Fpm.MainUI.Helpers
@using Fpm.ProfileData
@using Fpm.ProfileData.Entities.Profile
@model Fpm.ProfileData.Entities.User.FpmUser

@{ Layout = "~/Views/Shared/_LayoutPage.cshtml"; }
@{
    ViewBag.Title = "FPM - User Manager";
}
<link href="@(AppConfig.CssPath)TableSorter.css" rel="stylesheet" type="text/css" />
<script src="@(AppConfig.JsPath)user-management.js" type="text/javascript"></script>

<div class="standardWidth">
    @using (Html.BeginForm("UpdateUser", "User", FormMethod.Post, new { id = "EditUser" }))
    {
        <h2 class="subheading">Edit user</h2>

        <div class="delete-indicators">
            <label class="content-item-detail-label">Display Name:</label>
            @Html.TextBoxFor(model => model.DisplayName, new { @class = "unselected-domain" })
            <span class="field-validation-valid" data-valmsg-for="DisplayName" data-valmsg-replace="true"></span>
            <br />
        </div>
        <div class="delete-indicators">
            <label class="content-item-detail-label">User Name:</label>
            @Html.TextBoxFor(model => model.UserName, new { @class = "unselected-domain" })
            <span class="field-validation-valid" data-valmsg-for="UserName" data-valmsg-replace="true"></span>
            <br />
        </div>
        <div class="delete-indicators">
            <label class="content-item-detail-label">Is Administrator:</label>@Html.CheckBoxFor(model => model.IsAdministrator)
            <br />
        </div>
        @Html.HiddenFor(x => x.Id)
        @Html.HiddenFor(x => x.ReturnUrl)

        <div class="button-box clearfix">
            <input class="medium-button" id="Confirm" type="submit" value="Confirm" />
            <input class="medium-button" id="CancelBtn" type="button" onclick="location.href='@Model.ReturnUrl'" value="Cancel" />
        </div>

        @Html.Partial("_ProfileList", (IEnumerable<ProfileDetails>)ViewBag.ProfilesUserHasPermissionTo)
    }
</div>
